<div id=admin__ID style='display:none'>
    VmInclude:__COMPONENT__/toolbar/form-toolbar.html
</div>
<section id=form_container__ID>
    <div id=header__ID>
		SLEEP HISTORY
	</div>
    <form id=F__ID>
        <div class="container">
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span id=quest__ID>Do you snore</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="snore" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="snore" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you wake unrefreshed?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="unfreshed" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="unfreshed" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Have you ever fallen asleep whilst driving?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="driving" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="driving" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
                <div class="row row__ID">
                    <div class="col-sm-6 control-group">
                        <span >Do you awaken with shortness of breath?</span>
                    </div>
                    <div class="col-sm-2 control-group">
                        <label class="control control-radio">Yes
                                <input type="radio"  name="shortness_breath" value=Yes required />
                            <div class="control_indicator"></div>
                        </label>
                    </div>
                    <div class="col-sm-2 control-group">
                        <label class="control control-radio">No
                                <input type="radio" name="shortness_breath" value=No />
                            <div class="control_indicator"></div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span >Have you or your partner noticed you stop breathing when you are asleep?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="stop_breathing" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="stop_breathing" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>In the daytime are you chronically sleepy, fatigued or tired?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="chronically_sleepy" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="chronically_sleepy" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you have trouble falling or staying asleep?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="staying_asleep" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="staying_asleep" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do daytime worries keep you awake at night?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="daytime_worries" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="daytime_worries" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Does pain disturb your sleep?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="pain" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="pain" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you grind your teeth during sleep?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="grind_teeth" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="grind_teeth" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you experience unpleasant leg sensations at bed time?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="leg_sensations" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="leg_sensations" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you kick or jerk your arms or legs during sleep?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="jerk_arms" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="jerk_arms" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Have you ever had unusual movements or behaviors during sleep?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="unusual_movements" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="unusual_movements" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-4 control-group">
                        If yes, Describe
                </div>
                <div class="col-sm-6 control-group">
                    <textarea class="form-control"  name="unusual_movements_describe" placeholder=""></textarea>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you go to the toilet frequently overnight?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="toilet" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="toilet" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-4 control-group">
                        If yes, how many times on average per night?
                </div>
                <div class="col-sm-2 control-group">
                    <input class="form-control" type="text" name="toilet_number" placeholder="">
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>If appropriate age and gender, have you gone through menopause?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="menopause" value=Yes  />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="menopause" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Do you take sleeping tablets?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="sleeping_tablets" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="sleeping_tablets" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-4 control-group">
                    <span>If yes, how often?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Nightly
                            <input type="radio"  name="sleeping_tablets_frequency" value="Nightly" />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">When necessary
                            <input type="radio" name="sleeping_tablets_frequency" value="When necessary"/>
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-4 control-group">
                        Name of tablet:
                </div>
                <div class="col-sm-4 control-group">
                    <input class="form-control" type="text" name="sleeping_tablets_name" placeholder="">
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Approximately what time do you usually go to bed?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <div class="control-group">
                        Between
                        <input class="form-control" type="text" name="sleep_start" placeholder="" required />
                    </div>
                </div>
                <div class="col-sm-2 control-group">
                    <div class="control-group">
                        and
                        <input class="form-control" type="text" name="sleep_end" placeholder="" required />
                    </div>
                </div>
            </div>
            <br>
    		<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
    	</div>
    </form>
</section>
<script>
    function F__ID(){
        //------------------------------------------------------------
        $("input[name='unusual_movements']").change(function(){
            var radioValue = $(this).val();
            if(radioValue=='Yes') $('#unusual_movements_describe__ID').prop('required',true);
            else $('#unusual_movements_describe__ID').prop('required',false);
        })
        $("input[name='toilet']").change(function(){
            var radioValue = $(this).val();
            if(radioValue=='Yes') $('#toilet_number__ID').prop('required',true);
            else $('#toilet_number__ID').prop('required',false);
        })
        $("input[name='sleeping_tablets']").change(function(){
            var radioValue = $(this).val();
            if(radioValue=='Yes') {$('#sleeping_tablets_frequency__ID').prop('required',true);$('#sleeping_tablets_name__ID').prop('required',true);}
            else {$('#sleeping_tablets_frequency__ID').prop('required',false);$('#sleeping_tablets_name__ID').prop('required',false);}
        })
        //------------------------------------------------------------
        $('#D__ID').on('load',function(){
            $('#F__ID')[0].reset();
            $('#F__ID input:checkbox').removeAttr('checked');
            $('#submit__ID').show();
			var record=$vm.vm['__ID'].op.record; if(record==undefined) record=$vm.vm['__ID'].op.input.record;
            if($vm.vm['__ID'].op.input!=undefined && $vm.vm['__ID'].op.input.readonly!=undefined) $('#submit__ID').hide();
            if($vm.vm['__ID'].op.input!=undefined && $vm.vm['__ID'].op.input.admin!=undefined) $('#admin__ID').show();
            $vm.deserialize(record,'#F__ID');
        })
        //-------------------------------------
		$('#F__ID').submit(function(event){
			//--------------------------------------------------------
			event.preventDefault();
			$('#submit__ID').hide();
			//--------------------------------------------------------
            var data=$vm.serialize('#F__ID'); var dbv={}
            _before_submit(data,dbv);
			//--------------------------------------------------------
            var db_pid=$vm.module_list[$vm.vm['__ID'].name].table_id;
            var rid=undefined; if($vm.vm['__ID'].op.record!=undefined) rid=$vm.vm['__ID'].op.record.ID;
            var req={cmd:"add_json_record_s2",db_pid:db_pid,data:data,dbv:dbv};
			if(rid!=undefined) req={cmd:"modify_json_record_s2",rid:rid,db_pid:db_pid,data:data,dbv:dbv};
            $VmAPI.request({data:req,callback:function(res){
                $vm.refresh=1;
                if(rid!=undefined) window.history.go(-1);
				else if($vm.vm['__ID'].op.input!=undefined && $vm.vm['__ID'].op.input.goback!=undefined) window.history.go(-1);
                else $vm.alert('Your data has been successfully submitted');
            }});
			//--------------------------------------------------------
		})
		//--------------------------------------------------------
        var _before_submit=function(data,dbv){
            if($vm.coq_participant!=undefined){
                data.Participant=$vm.coq_participant;
            	data.Participant_uid=$vm.coq_participant_uid;
        		dbv.S1=$vm.coq_visit;
        		dbv.PPID=$vm.coq_participant_pid;
        		dbv.PUID=$vm.coq_participant_uid;
            }
		}
        //--------------------------------------------------------
    }
</script>
<style>
    #D__ID{
        height:100%;
        overflow: auto;
        animation: vm_module_fadein 1.0s;
        background: rgba(151,164,181,0.95);
    }
    #form_container__ID{
        padding-top:50px;
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;

        font-family: Verdana,sans-serif;
        font-size: 15px;
        line-height: 1.5;
        color: #000;
    }
    #form_container__ID .row__ID{
        padding:6px 0;
    }
    #form_container__ID .row__ID:hover{
        background-color: #727b84;
    }
    #header__ID{
        background-color:#727b84;
        color:#000;
        padding:10px 15px 10px 15px;
        font-size:150%;
    }
    #quest__ID{
        padding:5px 5px 5px 5px;
        font-size:120%;
    }
    #F__ID{
        border:1px solid #727b84;
        padding:6px 15px 20px 15px;
    }
    #F__ID label
        display: inline-block;
        margin: .6rem 0 .3rem 0;
    }

    #F__ID fieldset {
        border: 0px solid #c0c0c0;
        margin: 0;
        padding: 0;
    }
    @media screen and (max-width:768px){
        #form_container__ID{
            padding:20px 10px 50px 10px;
        }
    }
    .control {
        font-family: arial;
        display: block;
        position: relative;
        padding-left: 30px;
        margin-bottom: 5px;
        padding-top: 3px;
        cursor: pointer;
        font-size: 16px;
    }
    .control {
        font-family: arial;
        display: block;
        position: relative;
        padding-left: 30px;
        margin-bottom: 5px;
        padding-top: 3px;
        cursor: pointer;
        font-size: 16px;
    }
        .control input {
            position: absolute;
            z-index: -1;
            opacity: 0;
        }
    .control_indicator {
        position: absolute;
        top: 2px;
        left: 0;
        height: 20px;
        width: 20px;
        background: #e6e6e6;
        border: 0px solid #000000;
    }
    .control-radio .control_indicator {
        border-radius: 50%;
    }

    .control:hover input ~ .control_indicator,
    .control input:focus ~ .control_indicator {
        background: #cccccc;
    }

    .control input:checked ~ .control_indicator {
        background: #A51C3D;
    }
    .control:hover input:not([disabled]):checked ~ .control_indicator,
    .control input:checked:focus ~ .control_indicator {
        background: #0e6647d;
    }
    .control input:disabled ~ .control_indicator {
        background: #e6e6e6;
        opacity: 0.6;
        pointer-events: none;
    }
    .control_indicator:after {
        box-sizing: unset;
        content: '';
        position: absolute;
        display: none;
    }
    .control input:checked ~ .control_indicator:after {
        display: block;
    }
    .control-radio .control_indicator:after {
        left: 7px;
        top: 7px;
        height: 0px;
        width: 0px;
        border-radius: 50%;
        background: #ffffff;
    }
    .control-radio input:disabled ~ .control_indicator:after {
        background: #7b7b7b;
    }
</style>
