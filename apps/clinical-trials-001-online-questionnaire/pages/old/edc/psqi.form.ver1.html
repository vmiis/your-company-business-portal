<section>
    VmInclude:__BASE__/vmiis/Common-Code/toolbar/back_save.html
	<form id=F__ID>
        <table id=tb__ID style='width:800px;'>
            <colgroup><col style='width:400px' />
                <col style='width:100px' />
                <col style='width:100px' />
                <col style='width:100px' />
                <col style='width:100px' />
            </colgroup>

            <tr><td colspan=5 class='header__ID'>PITTSBURGH SLEEP QUALITY INDEX</td></tr>

            <tr id=tr_participant__ID style='display:none'><td colspan=5 data-id=Participant data-custom=1>
                <input name=Participant  id=Participant__ID  type=text class=sel__ID placeholder='select a partcipant...'/>
                <input name=Participant_uid id=Participant_uid__ID type=text readonly style="width:50px;color:#ccc;" />
                <u style='cursor:pointer;float:right;' id=Participant_r__ID>Remove</u>
            </td></tr>

            <tr><td colspan=5 >The following questions relate to your usual sleep habits during the past month <u>only</u>.  Your answers should indicate the most accurate reply for the <u>majority</u> of days and nights in the past month.
            <br><br>Please answer all questions. <br><br>
            </td></tr>

            <tr><td colspan=5 class=C__ID__bottom >1. During the past month, what time have you usually gone to bed at night?</td></tr>
            <tr><td data-id=PSQI1 data-custom=1 colspan=5 class=C__ID__top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BED TIME &nbsp;&nbsp;<input name=PSQI1  id=PSQI1__ID   type=text class=C__ID__input placeholder="HH:MM">&nbsp;<i>24 hour clock</i></td></tr>
            <tr><td colspan=5 class=C__ID__bottom >2. During the past month, how long (in minutes) has it usually taken you to fall asleep each night?</td></tr>
            <tr><td data-id=PSQI2 data-custom=1 colspan=5 class=C__ID__top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NUMBER OF MINUTES&nbsp;&nbsp;<input name=PSQI2  id=PSQI2__ID   type=text class=C__ID__input></td></tr>
            <tr><td colspan=5 class=C__ID__bottom >3. During the past month, what time have you usually gotten up in the morning?</td></tr>
            <tr><td data-id=PSQI3 data-custom=1 colspan=5 class=C__ID__top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GETTING UP TIME&nbsp;&nbsp;<input name=PSQI3  id=PSQI3__ID   type=text class=C__ID__input placeholder="HH:MM">&nbsp;<i>24 hour clock</i></td></tr>
            <tr><td colspan=5 class=C__ID__bottom >4. During the past month, how many hours of <u>actual sleep</u> did you get at night?<br>(This may be different than the number of hours you spent in bed.)</td></tr>
            <tr><td data-id=PSQI4 data-custom=1 colspan=5 class=C__ID__top>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HOURS OF SLEEP PER NIGHT&nbsp;&nbsp;<input name=PSQI4  id=PSQI4__ID   type=text class=C__ID__input min="0" max="24" ></td></tr>
            <tr><td colspan=5 class='C__ID__subheader'>For each of the remaining questions, tick the one best response. Please answer <u>all questions</u>.</td></tr>
            <tr><td>5. During the past month, how often have you had trouble sleeping because you . . .</td><td >Not during the past month</td><td >Less than once a week</td><td >Once or twice a week</td><td >Three or more times a week</td></tr>
            <tr><td>a. Cannot get to sleep within 30 minutes</td><td data-id=PSQI5a data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5a  id=PSQI5a__ID ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5a  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5a  ></td><td><input type=radio class=modified_radio__ID value=3  name=PSQI5a  ></td></tr>
            <tr><td>b. Wake up in the middle of the night or early morning</td><td data-id=PSQI5b data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5b  id=PSQI5b__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5b  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5b  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5b  ></td></tr>
            <tr><td>c. Have to get up to use the bathroom</td><td data-id=PSQI5c data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5c  id=PSQI5c__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5c  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5c  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5c  ></td></tr>
            <tr><td>d. Cannot breathe comfortably</td><td data-id=PSQI5d data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5d  id=PSQI5d__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5d  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5d  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5d  ></td></tr>
            <tr><td>e. Cough or snore loudly</td><td data-id=PSQI5e data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5e  id=PSQI5e__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5e  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5e  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5e  ></td></tr>
            <tr><td>f. Feel too cold</td><td data-id=PSQI5f data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5f  id=PSQI5f__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5f  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5f  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5f  ></td></tr>
            <tr><td>g. Feel too hot</td><td data-id=PSQI5g data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5g  id=PSQI5g__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5g  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5g  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5g  ></td></tr>
            <tr><td>h. Had bad dreams</td><td data-id=PSQI5h data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5h  id=PSQI5h__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5h  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5h  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5h  ></td></tr>
            <tr><td>i. Have pain</td><td data-id=PSQI5i data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI5i  id=PSQI5i__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI5i  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI5i  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI5i  ></td></tr>
            <tr><td>j. Any other reason(s) please describe:</td><td data-id=PSQI5j data-custom=1 colspan=4><textarea type=text name=PSQI5j  id=PSQI5j__ID  placeholder="Please describe here"></textarea></td></tr>
            <tr><td></td><td>Not during the past month</td><td>Less than once a week</td><td>Once or twice a week</td><td>Three or more times a week</td></tr>
            <tr><td class=C__ID__ques>How often during the past month have you had trouble sleeping because of this?</td><td data-id=PSQI5ji data-custom=1 class=C__ID__ques><input type=radio class=modified_radio__ID value=0 name=PSQI5ji  id=PSQI5ji__ID  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=1 name=PSQI5ji  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=2 name=PSQI5ji  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=3 name=PSQI5ji  ></td></tr>
            <tr><td></td><td>Very good</td><td>Fairly good</td><td>Fairly bad</td><td>Very bad</td></tr>
            <tr><td class=C__ID__ques>6. During the past month, how would you rate your sleep quality overall?</td><td data-id=PSQI6 data-custom=1 class=C__ID__ques><input type=radio class=modified_radio__ID value=0 name=PSQI6  id=PSQI6__ID  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=1 name=PSQI6  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=2 name=PSQI6  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=3 name=PSQI6  ></td></tr>
            <tr><td></td><td >Not during the past month</td><td >Less than once a week</td><td >Once or twice a week</td><td >Three or more times a week</td></tr>
            <tr><td>7. During the past month, how often have you taken medicine (prescribed or 'over the counter') to help you sleep?</td><td data-id=PSQI7 data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI7  id=PSQI7__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI7  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI7  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI7  ></td></tr>
            <tr><td>8. During the past month, how often have you had trouble staying awake while driving, eating meals or engaging in social activity?</td><td data-id=PSQI8 data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI8  id=PSQI8__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI8  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI8  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI8  ></td></tr>
            <tr><td></td><td>No problem at all</td><td>Only a very slight problem</td><td>Somewhat of a problem</td><td>A very big problem</td></tr>
            <tr><td class=C__ID__ques>9. During the past month, how much of a problem has it been for you to keep up enough enthusiasm to get things done?</td><td data-id=PSQI9 data-custom=1 class=C__ID__ques><input type=radio class=modified_radio__ID value=0 name=PSQI9  id=PSQI9__ID  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=1 name=PSQI9  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=2 name=PSQI9  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=3 name=PSQI9  ></td></tr>
            <tr><td></td><td>No bed partner or room mate</td><td>Partner/room mate in other room</td><td>Partner in same room, but not same bed</td><td>Partner in same bed</td></tr>
            <tr><td class=C__ID__ques>10. Do you have a bed partner or room mate?</td><td data-id=PSQI10 data-custom=1 class=C__ID__ques><input type=radio class=modified_radio__ID value=0 name=PSQI10  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=1 name=PSQI10  id=PSQI10__ID  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=2 name=PSQI10  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=3 name=PSQI10  ></td></tr>
            <tr><td class=C__ID__subheader>If you have a room mate or bed partner, ask him/her how often in the past month you have had . . .</td><td >Not during the past month</td><td >Less than once a week</td><td >Once or twice a week</td><td >Three or more times a week</td></tr>
            <tr><td>a. Loud snoring</td><td data-id=PSQI10a data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI10a  id=PSQI10a__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI10a  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI10a  ></td><td><input type=radio class=modified_radio__ID value=3  name=PSQI10a  ></td></tr>
            <tr><td>b. Long pauses between breaths while asleep</td><td data-id=PSQI10b data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI10b  id=PSQI10b__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI10b  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI10b  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI10b  ></td></tr>
            <tr><td>c. Legs twitching or jerking while you sleep</td><td data-id=PSQI10c data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI10c  id=PSQI10c__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI10c  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI10c  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI10c  ></td></tr>
            <tr><td>d. Episodes of disorientation or confusion during sleep</td><td data-id=PSQI10d data-custom=1><input type=radio class=modified_radio__ID value=0 name=PSQI10d  id=PSQI10d__ID  ></td><td><input type=radio class=modified_radio__ID value=1 name=PSQI10d  ></td><td><input type=radio class=modified_radio__ID value=2 name=PSQI10d  ></td><td><input type=radio class=modified_radio__ID value=3 name=PSQI10d  ></td></tr>
            <tr><td colspan=5>e. Other restlessness while you sleep; please describe below </td></tr>
            <tr><td data-id=PSQI10e data-custom=1><textarea type=text name=PSQI10e  id=PSQI10e__ID  placeholder="Please describe here" ></textarea></td><td>Not during the past month</td><td>Less than once a week</td><td>Once or twice a week</td><td>Three or more times a week</td></tr>
            <tr><td data-id=PSQI10ei data-custom=1 class=C__ID__ques></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=0 name=PSQI10ei  id=PSQI10ei__ID  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=1 name=PSQI10ei  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=2 name=PSQI10ei  ></td><td class=C__ID__ques><input type=radio class=modified_radio__ID value=3 name=PSQI10ei  ></td></tr>

            <tr style='display:none'><td>DURATION OF SLEEP:</td><td colspan=4><input name=PSQIDURAT__ID   id=PSQIDURAT__ID   type=text /></td></tr>
            <tr style='display:none'><td>SLEEP DISTURBANCE:</td><td colspan=4><input name=PSQIDISTB__ID  id=PSQIDISTB__ID  type=text /></td></tr>
            <tr style='display:none'><td>SLEEP LATENCY:</td><td colspan=4><input name=PSQILATEN__ID   id=PSQILATEN__ID   type=text /></td></tr>
            <tr style='display:none'><td>DAY DYSFUNCTION DUE TO SLEEPINESS:</td><td colspan=4><input name=PSQIDAYDYS__ID   id=PSQIDAYDYS__ID   type=text /></td></tr>
            <tr style='display:none'><td>SLEEP EFFICIENCY:</td><td colspan=4><input name=PSQIHSE__ID   id=PSQIHSE__ID   type=text /></td></tr>
            <tr style='display:none'><td>OVERALL SLEEP QUALITY:</td><td colspan=4><input name=PSQISLPQUAL__ID   id=PSQISLPQUAL__ID   type=text /></td></tr>
            <tr style='display:none'><td>NEED MEDS TO SLEEP:</td><td colspan=4><input name=PSQIMEDS__ID   id=PSQIMEDS__ID   type=text /></td></tr>
            <tr style='display:none'><td>PSQI:</td><td colspan=4><input name=PSQI__ID  id=PSQI__ID  type=text></td></tr>
        </table><br>&nbsp;<a id=save2__ID class=save_and_back__ID >Save &amp; Back</a>
    </form>
</section>
<script>
    function F__ID(){
        //----------------------------------
        VmInclude:__COMPONENT__/grid/form.v3.js
		VmInclude:__CURRENT_PATH__/task.old.form.js
        //----------------------------------
        $('#D__ID').on('load',function(){
            _init();
            _field_process();
            _task_fields=$vm.vm['__ID'].op.grid_to_form_parameters.task_fields;
            _set_participant_field();
            custom_field_process();
        })
        //----------------------------------
        var custom_field_process=function(){
            $('#tb__ID td[data-custom=1]').each(function(){
                var field=$(this).attr('data-id');
                switch(field){
                    case "Participant":
                        $(this).find("input[name='"+field+"']").val(_records[I].Participant);
                        $(this).find("input[name='"+field+"_uid']").val(_records[I].Participant_uid);
                    break;
                    case "PSQI5a":
                    case "PSQI5b":
                    case "PSQI5c":
                    case "PSQI5d":
                    case "PSQI5e":
                    case "PSQI5f":
                    case "PSQI5g":
                    case "PSQI5h":
                    case "PSQI5i":
                    case "PSQI5ji":
                    case "PSQI6":
                    case "PSQI7":
                    case "PSQI8":
                    case "PSQI9":
                    case "PSQI10":
                    case "PSQI10a":
                    case "PSQI10b":
                    case "PSQI10c":
                    case "PSQI10d":
                    case "PSQI10ei":
                        $('#tb__ID').find("input[name='"+field+"'][value='"+_records[I][field]+"']").prop('checked', true);
                        $('#tb__ID').find("input[name='"+field+"']").on('click',function(){
                            _set_value(this.value,_records,I,field);
                        })
                    break;
                    case "PSQI1":
                    case "PSQI2":
                    case "PSQI3":
                    case "PSQI4":
                        $('#tb__ID').find("input[name='"+field+"']").val(_records[I][field]);
                        $('#tb__ID').find("input[name='"+field+"']").on('blur',function(){
                            _set_value(this.value,_records,I,field);
                        })
                    break;
                    case "PSQI5j":
                    case "PSQI10e":
                        $('#tb__ID').find("textarea[name='"+field+"']").val(_records[I][field]);
                        $('#tb__ID').find("textarea[name='"+field+"']").on('blur',function(){
                            _set_value(this.value,_records,I,field);
                        })
                    break;
                }
            })
        }
        //----------------------------------
        _before_submit_form=function(){
            if( $('#tb__ID').find('input[name=PSQI1]').val().match(/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/g)===null ){ alert("Question 1: hh:mm"); return false;}
            if( $('#tb__ID').find('input[name=PSQI2]').val().match(/^(\d{1,3})$/g)===null ){ alert("Question 2: (nn)n"); return false;}
            if( $('#tb__ID').find('input[name=PSQI3]').val().match(/^(20|21|22|23|[01]\d|\d)(([:][0-5]\d){1,2})$/g)===null ){ alert("Question 3: hh:mm"); return false;}
            if( $('#tb__ID').find('input[name=PSQI4]').val().match(/^(\d{1,2}(\.\d{1})?)$/g)===null ){ alert("Question 4: (n)n(.n)"); return false;}

            if($('#tb__ID').find('input[name=PSQI1]').val()===''){ alert("Please answer question 1");	return false;}
        	if($('#tb__ID').find('input[name=PSQI2]').val()===''){ alert("Please answer question 2");	return false;}
        	if($('#tb__ID').find('input[name=PSQI3]').val()===''){ alert("Please answer question 3");	return false;}
        	if($('#tb__ID').find('input[name=PSQI4]').val()===''){ alert("Please answer question 4");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5a]:checked').val()===undefined){ alert("Please answer question 5a");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5b]:checked').val()===undefined){ alert("Please answer question 5b");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5c]:checked').val()===undefined){ alert("Please answer question 5c");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5d]:checked').val()===undefined){ alert("Please answer question 5d");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5e]:checked').val()===undefined){ alert("Please answer question 5e");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5f]:checked').val()===undefined){ alert("Please answer question 5f");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5g]:checked').val()===undefined){ alert("Please answer question 5g");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5h]:checked').val()===undefined){ alert("Please answer question 5h");	return false;}
        	if($('#tb__ID').find('input[name=PSQI5i]:checked').val()===undefined){ alert("Please answer question 5i");	return false;}
        	if($('#tb__ID').find('input[name=PSQI6]:checked').val()===undefined){ alert("Please answer question 6");	return false;}
        	if($('#tb__ID').find('input[name=PSQI7]:checked').val()===undefined){ alert("Please answer question 7");	return false;}
        	if($('#tb__ID').find('input[name=PSQI8]:checked').val()===undefined){ alert("Please answer question 8");	return false;}
            if($('#tb__ID').find('input[name=PSQI9]:checked').val()===undefined){ alert("Please answer question 9");	return false;}
            if($('#tb__ID').find('input[name=PSQI10]:checked').val()===undefined){ alert("Please answer question 10");	return false;}
        	if($('#tb__ID').find('input[name=PSQI10]:checked').val()!=='0'){
                if($('#tb__ID').find('input[name=PSQI10a]:checked').val()===undefined){ alert("Please answer question 10a");    return false;}
                if($('#tb__ID').find('input[name=PSQI10b]:checked').val()===undefined){ alert("Please answer question 10b");    return false;}
                if($('#tb__ID').find('input[name=PSQI10c]:checked').val()===undefined){ alert("Please answer question 10c");    return false;}
                if($('#tb__ID').find('input[name=PSQI10d]:checked').val()===undefined){ alert("Please answer question 10d");    return false;}
    		}
            if($('#tb__ID').find('textarea[name=PSQI5j]').val()!==''){
                if($('#tb__ID').find('input[name=PSQI5ji]:checked').val()===undefined){ alert("Please answer question 5j second part");    return false;}
    		}
            if($('#tb__ID').find('textarea[name=PSQI10e]').val()!==''){
                if($('#tb__ID').find('input[name=PSQI10ei]:checked').val()===undefined){ alert("Please answer question 10e second part");    return false;}
    		}
            var v1=$('#tb__ID').find('input[name=PSQI1]').val();
            var v2=$('#tb__ID').find('input[name=PSQI2]').val();
            var v3=$('#tb__ID').find('input[name=PSQI3]').val();
            var v4=$('#tb__ID').find('input[name=PSQI4]').val();
            var v5=$('#tb__ID').find('input[name=PSQI5a]:checked').val();
            var v6=$('#tb__ID').find('input[name=PSQI5b]:checked').val();
            var v7=$('#tb__ID').find('input[name=PSQI5c]:checked').val();
            var v8=$('#tb__ID').find('input[name=PSQI5d]:checked').val();
            var v9=$('#tb__ID').find('input[name=PSQI5e]:checked').val();
            var v10=$('#tb__ID').find('input[name=PSQI5f]:checked').val();
            var v11=$('#tb__ID').find('input[name=PSQI5g]:checked').val();
            var v12=$('#tb__ID').find('input[name=PSQI5h]:checked').val();
            var v13=$('#tb__ID').find('input[name=PSQI5i]:checked').val();
            var v14=$('#tb__ID').find('textarea[name=PSQI5j]').val();
            var v15=$('#tb__ID').find('input[name=PSQI5ji]:checked').val();
            var v16=$('#tb__ID').find('input[name=PSQI6]:checked').val();
            var v17=$('#tb__ID').find('input[name=PSQI7]:checked').val();
            var v18=$('#tb__ID').find('input[name=PSQI8]:checked').val();
            var v19=$('#tb__ID').find('input[name=PSQI9]:checked').val();
            var v20=$('#tb__ID').find('input[name=PSQI10]:checked').val();
            var v21=$('#tb__ID').find('input[name=PSQI10a]:checked').val();
            var v22=$('#tb__ID').find('input[name=PSQI10b]:checked').val();
            var v23=$('#tb__ID').find('input[name=PSQI10c]:checked').val();
            var v24=$('#tb__ID').find('input[name=PSQI10d]:checked').val();
            var v25=$('#tb__ID').find('textarea[name=PSQI10e]').val();
            var v26=$('#tb__ID').find('input[name=PSQI10ei]:checked').val();
    		var vpsqi1=0;
    		if(v4>=7) vpsqi1=0;
    		if(v4<7 && v4>=6) vpsqi1=1;
    		if(v4<6 && v4>=5) vpsqi1=2;
    		if(v4<5) vpsqi1=3;
    		_records[I].PSQIDURAT=vpsqi1;
    		var pqsi5j=0;
    		if(v14=='') pqsi5j=0; else pqsi5j=v15;
    		var vpsqi2=parseInt(v6)+parseInt(v7)+parseInt(v8)+parseInt(v9)+parseInt(v10)+parseInt(v11)+parseInt(v12)+parseInt(v13)+parseInt(pqsi5j);

    		if(vpsqi2==0) _records[I].PSQIDISTB=0;
    		if(vpsqi2>=1 && vpsqi2<=9) _records[I].PSQIDISTB=1;
    		if(vpsqi2>9 && vpsqi2<=18) _records[I].PSQIDISTB=2;
    		if(vpsqi2>18) _records[I].PSQIDISTB=3;
    		var vpsqi3=0;
    		if(v2>=0 && v2<=15) vpsqi3=0;
    		if(v2>15 && v2<=30) vpsqi3=1;
    		if(v2>30 && v2<=60) vpsqi3=2;
    		if(v2>60) vpsqi3=3;
            var vpsqi3i=parseInt(vpsqi3)
            var v5i=parseInt(v5)
    		if((vpsqi3i+v5i)==0) _records[I].PSQILATEN=0;
    		if((vpsqi3i+v5i)>=1 && (vpsqi3i+v5i)<=2) _records[I].PSQILATEN=1;
    		if((vpsqi3i+v5i)>=3 && (vpsqi3i+v5i)<=4) _records[I].PSQILATEN=2;
    		if((vpsqi3i+v5i)>=5 && (vpsqi3i+v5i)<=6) _records[I].PSQILATEN=3;
            var v18i=parseInt(v18)
            var v19i=parseInt(v19)
    		if((v18i+v19i)==0) _records[I].PSQIDAYDYS=0;
    		if((v18i+v19i)>=1 && (v18i+v19i)<=2) _records[I].PSQIDAYDYS=1;
    		if((v18i+v19i)>=3 && (v18i+v19i)<=4) _records[I].PSQIDAYDYS=2;
    		if((v18i+v19i)>=5 && (v18i+v19i)<=6) _records[I].PSQIDAYDYS=3;
            var startTime = v1;
            var endTime = v3;

            var startTimeArray = startTime.split(":");
            var startInputHrs = parseInt(startTimeArray[0]);
            var startInputMins = parseInt(startTimeArray[1]);

            var endTimeArray = endTime.split(":");
            var endInputHrs = parseInt(endTimeArray[0]);
            var endInputMins = parseInt(endTimeArray[1]);

            var startMin = startInputHrs*60 + startInputMins;
            var endMin = endInputHrs*60 + endInputMins;

            var result;

            if (endMin < startMin) {
               var minutesPerDay = 24*60;
               result = minutesPerDay - startMin;  // Minutes till midnight
               result += endMin; // Minutes in the next day
            } else {
              result = endMin - startMin;
            }
            v4=parseInt(v4)*60*100;
            var vpsqi4=v4/result;
            /*
        	if(vpsqi4>=85) $('input[name=PSQIHSE__ID').val(0);
    		if(vpsqi4<85 && vpsqi4>=75) $('input[name=PSQIHSE__ID').val(1);
    		if(vpsqi4<75 && vpsqi4>=65) $('input[name=PSQIHSE__ID').val(2);
    		if(vpsqi4<65) $('input[name=PSQIHSE__ID').val(3);
            $('input[name=PSQISLPQUAL__ID').val(v16)
    		$('input[name=PSQIMEDS__ID').val(v17)
            $('input[name=PSQI__ID').val( parseInt($('input[name=PSQIDURAT__ID').val())+ parseInt($('input[name=PSQIDISTB__ID').val())+ parseInt(_records[I].PSQILATEN=))+ parseInt(_records[I].PSQIDAYDYS=))+  parseInt($('input[name=PSQIHSE__ID').val())+  parseInt($('input[name=PSQISLPQUAL__ID').val())+ parseInt($('input[name=PSQIMEDS__ID').val()));
            */
            if(vpsqi4>=85) _records[I].PSQIHSE=0;
    		if(vpsqi4<85 && vpsqi4>=75) _records[I].PSQIHSE=0;
    		if(vpsqi4<75 && vpsqi4>=65) _records[I].PSQIHSE=2;
    		if(vpsqi4<65) _records[I].PSQIHSE=3;
            _records[I].PSQISLPQUAL=v16;
    		_records[I].PSQIMEDS=v17;
            _records[I].PSQI=
                parseInt(_records[I].PSQIDURAT)+
                parseInt(_records[I].PSQIDISTB)+
                parseInt(_records[I].PSQILATEN)+
                parseInt(_records[I].PSQIDAYDYS)+
                parseInt(_records[I].PSQIHSE)+
                parseInt(_records[I].PSQISLPQUAL)+
                parseInt(_records[I].PSQIMEDS);
            return true;
        }
        //----------------------------------
    }
</script>
<style>
    VmInclude:__BASE__/vmiis/Common-Code/toolbar/toolbar.css
    VmInclude:__BASE__/vmiis/Common-Code/grid/form.css
    #tb__ID tr td:nth-child(2),
    #tb__ID tr td:nth-child(3),
    #tb__ID tr td:nth-child(4),
    #tb__ID tr td:nth-child(5)
    {
        text-align: center;
        padding-top: 5px;
    }
    .C__ID__column1{width:400px;}
    .C__ID__column2{width:100px;}
    .C__ID__bottom{text-align:left!important;border-bottom:0px!important;}
    .C__ID__top{text-align:left!important;border-top:0px!important;}
    .C__ID__input{width:100px!Important;border:1px #B8BDBF solid!Important}
    .C__ID__answb{border-bottom:0px!important;}
    .C__ID__ques{border-top:0px!important;}
    .modified_radio__ID {
    	-webkit-appearance: none;
    	-moz-appearance: button;
    /*	background-color: #fafafa;*/
    	border: 1px solid #000;
    	width:22px;
    	height:26px;
    /*	box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05);*/
    	padding: 0px;
    	border-radius: 3px;
    	display: inline-block;
    	position: relative;
    	opacity:0.35;
        vertical-align: middle;
    }
    .modified_radio__ID:active, .modified_radio__ID:checked:active {
    	/*box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px 1px 3px rgba(0,0,0,0.1);*/
    }

    .modified_radio__ID:checked {
        -moz-appearance: button;
    	background-color: #554055;
    	border: 1px solid #adb8c0;
    /*	box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05), inset 15px 10px -12px rgba(255,255,255,0.1);*/
    	color: #99a1a7;
    	opacity:0.9;
    }
    .modified_radio__ID:checked:after {
    	/*content: '\2714';*/
    	font-size: 14px;
    	position: absolute;
    	top: 0px;
    	left: 3px;
    	color: #99a1a7;
    }
    .modified_radio__ID:active, .modified_radio__ID:checked:active {
    	box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px 1px 3px rgba(0,0,0,0.1);
    }
    .modified_number__ID{
        margin-left:-18px;
        font-size:14pt;
        vertical-align:middle;
    }

</style>
