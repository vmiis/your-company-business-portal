VmInclude:__COMPONENT__/toolbar/form-toolbar.html
<section id=form_container__ID>
	<div id=header__ID>
		Participant visit booking
	</div>
	<form id=F__ID>
		<div class="container">
			<div class="row row__ID" id=row_Participant__ID>
				<div class="col-sm-12 col-lg-9 input__ID">
					<span class=label__ID>Participant</span><br>
					<input name="Participant" class=form-control id=Participant__ID data-id="Participant" required>
				</div>
				<div class="col-sm-12 col-lg-3 input__ID">
					<span class=label__ID>Participant ID</span><br>
					<input name="Participant_uid" class=form-control readonly>
				</div>
				<br>
				<hr style='border-top:1px solid #666; width:100%'></hr>
			</div>
            <div class="row row__ID">
                <div class="col-sm col-lg-6">
                    <span>Date</span>
                    <input type=date class="form-control" name="Date" required>
                </div>
                <div class="col-sm col-lg-6">
                    <span>Time</span>
                    <input type=time class="form-control" name="Time" required>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm col-lg-4">
                    <span>Duration (hours)</span>
                    <select class="form-control" name="Hours">
                        <option>0</option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                        <option>6</option>
                        <option>7</option>
                        <option>8</option>
                        <option>9</option>
                    </select>
                </div>
				<div class="col-sm col-lg-4">
                    <span>Duration (Minutes)</span>
                    <select class="form-control" name="Minutes">
						<option>0</option>
                        <option>5</option>
                        <option>10</option>
                        <option>15</option>
                        <option>20</option>
                        <option>25</option>
                        <option selected="selected">30</option>
                        <option>35</option>
                        <option>40</option>
                        <option>45</option>
                        <option>50</option>
						<option>55</option>
                    </select>
                </div>
				<div class="col-sm col-lg-4">
                    <span>Color</span><br>
                    <input type=color name="Color" style='width:100px;height:38px;border:none' value=#008800>
                </div>
            </div>
			<div class="row row__ID">
                <div class="col">
                    <span>Notes</span>
                    <textarea class="form-control" name="Notes" style='min-height:50px'></textarea>
                </div>
            </div>
            <br>
			<div class="row">
				<div class=col>
					<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
				</div>
			</div>
		</div>
	</form>
</section>
<script>
    function F__ID(){
        //-------------------------------------
        VmInclude:__CURRENT_PATH__/task_form.js
        //-------------------------------------
		var participant_tid=this_module.participant_tid;
    	var sql="with tb as (select name=S1,value2=uid from [TABLE-"+participant_tid+"])";
    	sql+=" select top 10 name,value=name,value2 from tb where name like '%'+@S1+'%' ";
    	$vm.autocomplete($('#Participant__ID'),sql,function(key,value){
    		$("#F__ID input[name="+key+"]").val($vm.text(value));
    	})
        //-------------------------------------
        var on_load=function(record){
            $('#F__ID input[name=Participant').prop("disabled",false);
            if(record!=undefined){
                if(record.Participant!=undefined){
                    //if(record.PUID!=undefined) $('#F__ID input[name=Topic_uid').val(record.PUID);
                    $('#F__ID input[name=Participant').prop("disabled",true);
                }
            }
        }
        //-------------------------------------
        var before_submit=function(record,dbv){
			dbv.DT1=record.Date;
            dbv.S1=record.Time;
            dbv.V1=(60*parseFloat(record.Hours)+parseFloat(record.Minutes)).toString();
            dbv.PUID=record.Participant_uid;
            return true;
        };
        //-------------------------------------
    }
</script>
<style>
	#D__ID{
		height:100%;
		overflow:auto;
		animation: vm_module_fadein 1.0s;
        background-color: #fff;
	}
    #form_container__ID{
        margin-top:20px;
		max-width: 700px;
		margin-left: auto;
		margin-right: auto;
		font-family: Verdana,sans-serif;
    	font-size: 15px;
    	line-height: 1.5;
	}
    #F__ID{
		border:1px solid #bbb;
        border-top-width: 0;
		padding:6px 15px 20px 15px;
	}
	#header__ID{
		background-color:#727b84;
		color:#fff;
		padding:10px 15px 10px 15px;
		font-size:120%;
        border:1px solid #bbb;
        border-bottom-width: 0;
	}
    .row__ID{
		padding:6px 0;
	}
	.row__ID:hover{
		background-color: rgba(0,0,0,0.1);
	}
	.row__ID span{
        font-weight:bold;
    	display: inline-block;
    	padding: 5px 0;
	}
	@media screen and (max-width:768px){
		#form_container__ID{
			padding:20px 10px 50px 10px;
		}
	}
    @media print{
        #form_container__ID{
            margin:0;
            padding:0;
            position: absolute;
            top:0;
            left:0;
            width:100%;
            max-width: 100%;
        }
    }
</style>
