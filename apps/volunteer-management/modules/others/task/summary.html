<section>
    <section id=grid1__ID class="w3s">

    </section>
</section>
<script>
function F__ID(){
    //---------------------------------------------
    var content_slot=$vm.root_layout_content_slot;

	//var prefix=$vm.module_list[$vm.vm['__ID'].name].prefix;

	var call_log_tid="20009655";					//$vm.module_list[prefix+'call-log-child'].table_id;
	var research_participation_tid="20009681";		//$vm.module_list[_app_id+'registration_demographic_research'].var.research_participation_tid;
    var volunteer_tid="20008533";					//$vm.module_list[_app_id+'registration_demographic_research'].var.volunteer_tid;
    //-------------------------------------
    //$('#name__ID').text('Project Information');
    //---------------------------------------------
	var input;
	$('#D__ID').on('load',function(){
		input=$vm.vm['__ID'].op.input;
        //$("#title__ID").text("Projects | "+$vm.vm['__ID'].op.project_name.replace(/_/g,' '));
          $('#save__ID').hide();
          $('#export__ID').hide();
          var pn="";
          var pname="";
          var Phone="";
          var Postcode="";
          var Email="";
          var Gender="";
          var Year_of_Birth="";
          var ast='';
          var cop='';
          var chr='';
          var emp='';
          var rhi='';
          var lun='';
          var ins='';
          var nar='';
          var osa='';
          var rls='';
          ///var sql="select Information from [TABLE-"+volunteer_tid+"] where UID=@I2";
          //var req_data={cmd:'query_records',sql:sql,i2:input.record.V_UID};
		  var req_data={cmd:'query_special_records',sql:'get_volunteer_info',i1:input.record.V_UID};
          var txt='';
          jQuery.ajaxSetup({async:false});
          $VmAPI.request({data:req_data,callback:function(res){
              if(res.records.length>0){
                if(res.records[0].First_Name!==undefined) pname=res.records[0].First_Name;
                if(res.records[0].Last_Name!==undefined) pn=res.records[0].Last_Name;
                if(res.records[0].Phone!==undefined) Phone=res.records[0].Phone;
                if(res.records[0].Postcode!==undefined) Postcode=res.records[0].Postcode;
                if(res.records[0].Email!==undefined) Email=res.records[0].Email;
                if(res.records[0].Gender!==undefined) Gender=res.records[0].Gender;
                if(res.records[0].Year_of_Birth!==undefined) Year_of_Birth=res.records[0].Year_of_Birth;
                if(res.records[0].Asthma=='1') ast='checked'; else ast='';
                if(res.records[0].COPD=='1')  cop='checked'; else cop='';
                if(res.records[0].Chronic_Bronchitis=='1') chr='checked'; else chr='';
                if(res.records[0].Emphysema=='1') emp='checked'; else emp='';
                if(res.records[0].Rhintis=='1') rhi='checked'; else rhi='';
                if(res.records[0].Insomnia=='1') ins='checked'; else ins='';
                if(res.records[0].Lung_Cancer=='1') lun='checked'; else lun='';
                if(res.records[0].Narcolepsy=='1') nar='checked'; else nar='';
                if(res.records[0].OSA=='1') osa='checked'; else osa='';
                if(res.records[0].RLS=='1') rls='checked'; else rls='';

                txt='<div class="w3-container w3-content w3-medium" >'
                txt+=' <div class="w3-container w3-left">';
                txt+='   <h4 class="" >'+pname+' '+pn+'</h4>';
                txt+='        </div>';
                txt+='  <table  class="w3-table w3-medium">';
                txt+='  <colgroup><col style="width:100px"></col><col></col></colgroup>';
                txt+='    <tr >';
                txt+='      <td>Phone:</td>';
                txt+='      <td>'+Phone+'</td>';
                txt+='    </tr>';
                txt+='    <tr >';
                txt+='      <td>Email:</td>';
                txt+='      <td>'+Email+'</td>';
                txt+='    </tr>';
                txt+='    <tr >';
                txt+='      <td>Postcode:</td>';
                txt+='      <td>'+Postcode+'</td>';
                txt+='    </tr>';
                txt+='    <tr >';
                txt+='      <td>Gender:</td>';
                txt+='      <td>'+Gender+'</td>';
                txt+='    </tr>';
                txt+='    <tr >';
                txt+='      <td>Year_of_Birth:</td>';
                txt+='      <td>'+Year_of_Birth+'</td>';
                txt+='    </tr>';
                txt+='  </table>';
                txt+='  <table  class="w3-table w3-medium">';
                txt+='  <colgroup><col></col><col></col><col></col><col></col><col></col></colgroup>';
                txt+='    <tr >';
                txt+='      <td><input class="w3-check" type="checkbox" '+ast+'>Asthma</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+cop+'>COPD</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+chr+'>Chronic Bronchitis</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+emp+'>Emphysema</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+rhi+'>Rhintis</td>';
                txt+='    </tr>';
                txt+='    <tr >';
                txt+='      <td><input class="w3-check" type="checkbox" '+lun+'>Lung Cancer</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+ins+'>Insomnia</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+nar+'>Narcolepsy</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+osa+'>OSA</td>';
                txt+='      <td><input class="w3-check" type="checkbox" '+rls+'>RLS</td>';
                txt+='    </tr>';
                txt+='  </table>';
                //txt+='</div>';
                //$('#grid1__ID').html(txt);
                 }
            }});
            txt+=' <div class="w3-container">';
            txt+='   <hr style="border-top:2px solid #888;"><h6 class="" >Other projects of interest</h6>';
            txt+='        </div>';
            txt+='  <table  class="w3-table w3-medium">';
            txt+='  <colgroup><col style="width:100px"></col><col></col><col></col><col></col></colgroup>';
            txt+='    <tr >';
            txt+='      <th>Project</th>';
            txt+='      <th>Status</th>';
            txt+='      <th>Start Date</th>';
            txt+='      <th>End Date</th>';
            txt+='    </tr>';
            var project='';
            var status='';
            var startdate='';
            var enddate='';
            var sql="select Information from [TABLE-"+research_participation_tid+"] where S2=@S2";
            var req_data={cmd:'query_records',sql:sql,s2:'system_20008533_'+Email};
            $VmAPI.request({data:req_data,callback:function(res){
                for(var i=0;i<res.records.length;i++){
                    if(res.records[i].Project!=$vm.vm['__ID'].op.prj){
                        if(res.records[i].Project!==undefined) project=res.records[i].Project; else project='';
                        if(res.records[i].Status!==undefined) status=res.records[i].Status; else status='';
                        if(res.records[i].Start_date!==undefined)  startdate=res.records[i].Start_date; else startdate='';
                        if(res.records[i].End_date!==undefined) enddate=res.records[i].End_date; else enddate='';
                        txt+='    <tr >';
                        txt+='      <td>'+project+'</td>';
                        txt+='      <td>'+status+'</td>';
                        txt+='      <td>'+startdate+'</td>';
                        txt+='      <td>'+enddate+'</td>';
                        txt+='    </tr>';
                    }
               }
               txt+='</table>';
            }});
            txt+=' <div class="w3-container">';
            txt+='   <hr style="border-top:2px solid #888;"><h6 class="" >Call Log/Notes</h6>';
            txt+='        </div>';
            txt+='  <table  class="w3-table w3-medium">';
            txt+='  <colgroup><col></col><col></col><col></col><col></col></colgroup>';
            var cl='';
            var vc='';
            var wc='';
            var rr='';
            var vdr='';
            var c='';
            var p='';
            var date='';
            var sql="select Information from [TABLE-"+call_log_tid+"] where PUID=@I2";
            var req_data={cmd:'query_records',sql:sql,i2:input.record.V_UID};
            $VmAPI.request({data:req_data,callback:function(res){
                for(var i=0;i<res.records.length;i++){
                    if(res.records[i].Date!==undefined) date=res.records[i].Date;else date='';
                    if(res.records[i].Call_log!==undefined) cl=res.records[i].Call_log;else cl='';
                    txt+='    <tr >';
                    txt+='      <td><b>Notes: '+date+'</b></td>';
                    txt+='      <td colspan=5>'+cl+'</td>';
                    txt+='    </tr>';
               }
            }});
            jQuery.ajaxSetup({async:true});
            txt+='  </table>';
            txt+='</div>';
            $('#grid1__ID').html(txt);
        })
    }
</script>
<style>
	#D__ID{
	  height:100%;
	  overflow:auto;
	  animation: vm_module_fadein 1.0s;
	  background-color:#fff;
	}
</style>
