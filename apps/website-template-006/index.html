<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Modular distributed web application</title>
		<meta charset="utf-8">
		<meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel="icon" href="data:,">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css" />
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.2.1.min.js"></script>
        <script>
            $.ajaxSetup({cache:true});
            $.get('version.html',function(v){
                console.log(v);
                $vm={}; if(window.location.hostname=='127.0.0.1' || window.location.hostname=='localhost')	$vm.debug =true;
                $vm.ver=v.trim().split(',');
                var url=window.location.href.split('?')[0];
                var ver=localStorage.getItem(url+"_ver");
                var txt=localStorage.getItem(url+"_txt");
                //------------------------------------------
                if(ver!=$vm.ver[1] || txt===null || $vm.debug==true){
                    console.log((new Date().getTime()-$vm.start_time).toString()+"---"+'loading '+url+'?_='+$vm.ver[1]);
                    $.get('layout/layout.html?_='+$vm.ver[1]+$vm.reload,function(new_txt){
                        localStorage.setItem(url+"_txt",new_txt);
                        localStorage.setItem(url+"_ver",$vm.ver[1]);
                        $('#layout__ID').html(new_txt);
                    },'text');
                }
                else{ $('#layout__ID').html(txt); }
            },'text')
        </script>
	</head>
	<body><div id=layout__ID></div></body>
</html>
