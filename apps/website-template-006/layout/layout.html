<div hrader>
    <div top-right-corner id=top_right_corner__ID class='d-none d-xl-block'>
    	<span id=database_p__ID><span style='color:green'>&#11044; </span>Connected to a private database<br></span>
    	<span id=database_d__ID><span style='color:red'>&#11044; </span>Connected to a public database<br></span>
    	<span id=username__ID></span>
    	<script>
            var vm_top_right_corner=function(){
        		if($vm.server=='development') $('#database_d__ID').show();
        		else if($vm.server=='production') $('#database_p__ID').show();
            }
    	</script>
    	<style>
    		#top_right_corner__ID{
    			display:block;
    			position:fixed;
    			top:3px;
    			right:3px;
    			font-size:11px;
    			line-height:13px;
    			color:#fff;
    			z-index: 99999;
    		}
    		#username__ID{
    			float:right;
    		}
    		#database_d__ID{
    			display:none;
    		}
    		#database_p__ID{
    			display:none;
    		}
    	</style>
    </div>
    <div id=header__ID>
        <div id=vm_logo module=home>
            <span id=vm_logo_label_A>Business Portal</span><br>
            <span id=vm_logo_label_B>on-demand business applications</span>
        </div>
        <div id="vm_system_menu">
            <a module=home _class="vm_active"><i class="fa fa-home"></i> Home</a>
            <div class="vm_dropdown">
                <button class="vm_dropbtn">Pages <i class="fa fa-caret-down"></i></button>
                <div class="vm_dropdown-content">
                    <a module=pages_link-1>My first bootstrap page</a>
                    <a module=pages_link-2>Dark table</a>
                    <a module=pages_link-3>Carousel</a>
                    <a module=pages_ecos>Ecos</a>
                    <a module=pages_normative>Normative</a>
                </div>
            </div>
            <div class="vm_dropdown" id=signin__ID>
                <button class="vm_dropbtn"><i class="fa fa-user"></i> Sign In <i class="fa fa-caret-down"></i></button>
                <div class="vm_dropdown-content">
                    <a id=google__ID >With your Google account</a>
                    <a id=facebook__ID >With your Facebook account</a>
                    <a onclick="$vm.nav_wappsystem_signin();">With your Wappsystem account</a>
                </div>
            </div>
            <a id=signout__ID style="display:none" onclick=$vm.nav_signout()><i class="fa fa-user"></i> Sign Out</a>
            <input id=vm_system_search  type="text" placeholder="Search pages..." />
        </div>
        <span module=home id=m_title>Business Portal</span>
    	<a toggle id="vm_icon" onclick="vm_toggle()"><i class="fa fa-bars"></i></a>
        <script>
        	//---------------------------------------------
            function vm_toggle() {
                var x = document.getElementById("vm_system_menu");
                if(x.className==='') x.className="responsive";
                else x.className="";
            }
            var vm_header=function(){
                $('#vm_system_menu a').on('click',function(){
                    var module=$(this).attr('module');
                    if(module!=undefined) $vm.load_module_v2(module);
                    if( $(this).attr('toggle')==undefined){
                        var x = document.getElementById("vm_system_menu");
                        if(x.className==='responsive') x.className="";
                    }
                })
                $('.vm_dropdown').on('click',function(){
                    var d=$(this).find('.vm_dropdown-content');
                    if(d.css('display')=='block') d.css('display','none');
                    else d.css('display','block');
                })
                $(".vm_dropdown").mouseleave(function (){  $(".vm_dropdown-content").hide();  })
                $(".vm_dropdown-content").mouseleave(function (){  $(this).hide();  })
                $('#m_title').on('click',function(){   var module=$(this).attr('module');   $vm.load_module_v2(module);    })
                $('#vm_logo').on('click',function(){   var module=$(this).attr('module');   $vm.load_module_v2(module);    })
                //---------------------------------------------
                var init_loop=setInterval(function (){
                    console.log('init_loop...')
                    if($vm.init_status==1){
                        clearInterval(init_loop);
                        show_user();
                        console.log((new Date().getTime()-$vm.start_time).toString()+"---"+"********************* init is done ************************");
                    }
                },100);
                //---------------------------------------------
                var show_user=function(){
                    var third=""
                    if($vm.user_puid=="1") third=" (Google)";
                    if($vm.user_puid=="2") third=" (Facebook)";
                    if($vm.user=='guest'){
                        $('#username__ID').text('');
                        $('#signin__ID').show();
                        $('#signout__ID').hide();
                    }
                    else{
                        $('#username__ID').text('Signed in as '+ $vm.user+third);
                        $('#signin__ID').hide();
                        $('#signout__ID').show();
                    }
                }
                //---------------------------------------------
                if(window.location.hostname!='127.0.0.1'){
                    $vm.google_signin_setup('175539446682-tvqlkse9j0mt79fk70uetoq30bpnrboa.apps.googleusercontent.com','google__ID',show_user);
                    $vm.facebook_signin_setup('360182794393427','facebook__ID',show_user);
                }
                //---------------------------------------------
            }
        </script>
        <style>
            #header__ID{
                height:100px;
                background: rgba(0,0,0,0.5);
            }
            #vm_system_menu {
                margin-top:50px;
                margin-right:20px;
                overflow: hidden;
                background: rgba(0,0,0,0.0);
                display:inline-block;
                float:right;
            }
            #vm_system_search{
                margin-top:5px;
                margin-left:200px;
                border-radius:.25rem;
                padding-left:6px
            }
            #vm_system_menu > a {
              float: left;
              display: block;
              color: #f2f2f2;
              text-align: center;
              padding: 10px 8px;
              text-decoration: none;
              font-size: 14px;
              cursor:pointer;
            }
        	#vm_icon {
              display: none;
            }
            .vm_active {
              background-color: #4CAF50;
              color: white;
            }
            .vm_dropdown {
                float: left;
                overflow: hidden;
            }
            .vm_dropdown .vm_dropbtn {
                font-size: 14px;
                border: none;
                outline: none;
                color: white;
                padding: 10px 8px;
                background-color: inherit;
                font-family: inherit;
                margin: 0;
            }
            .vm_dropdown-content {
                display: none;
                position: absolute;
                background-color: #f9f9f9;
                min-width: 160px;
                box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
                z-index: 1;
            }
        	.vm_dropdown-content a {
                float: none;
                font-size: 14px;
                color: #666!important;
                padding: 3px 16px;
                text-decoration: none;
                display: block;
                text-align: left;
                cursor:pointer;
            }
            #vm_system_menu > a:hover, .vm_dropdown:hover .vm_dropbtn {
              background-color: #555;
              color: white;
              border-radius:4px;
            }
            .vm_dropdown-content a:hover {
                background-color: #ddd;
                color: black;
            }
            #m_title{
                display:none;
            }
            #vm_logo{
                display:inline-block;
                padding-top:35px;
                padding-left:20px;
                cursor:pointer;
            }
            #vm_logo_label_A{
                font-family: Arial, sans-serif;
                color:#fff;
                font-size: 200%;
                line-height:10px;
                display:inline-block;
            }
            #vm_logo_label_B{
                font-family: Arial, sans-serif;
                color:#fff;
                font-size: 93%;
                line-height:80%;
                display:inline-block;
            }
            @media screen and (max-width: 1280px) {
                #m_title{
                    color:#fff;
                    font-size: 28px;
                    display:inline-block;
                    padding: 7px 0 0 12px;
                    cursor: pointer;
                }
                #vm_system_menu a, .vm_dropdown .vm_dropbtn {
                    display: none;
                }
                #vm_icon {
                    float: right;
                    display: block;
                    font-size:28px;
                    padding:7px 16px 3px 16px;
                    position: absolute;
                    right: 0;
                    top: 0;
                    cursor:pointer;
                    color:#fff;
                }
                #vm_system_menu.responsive {position: relative;}
                #vm_system_menu.responsive a {
                    float: none;
                    display: block;
                    text-align: left;
                }
                #vm_system_menu.responsive .vm_dropdown {float: none;}
                #vm_system_menu.responsive .vm_dropdown-content {position: relative;}
                #vm_system_menu.responsive .vm_dropdown .vm_dropbtn {
                    display: block;
                    width: 100%;
                    text-align: left;
                }
                #vm_system_menu {
                    margin-top:0px;
                    margin-right:0px;
                    overflow: hidden;
                    background: #1c3144;
                    display:block;
                    float:unset;
                }
                #header__ID{
                    height:unset;
                    background: rgba(0,0,0,0.3);
                }
                #vm_logo{
                    display:none;
                }
                #vm_system_search{
                    display:none;
                }
            }
        </style>
    </div>
</div>
<div content>
    <div content-container id="content_container__ID">
    	<div id=vm_loader class="loader__ID"></div>
    </div>
    <script content-container-js>
    	//$vm.root_layout_content_slot="content_container__ID";
    </script>
    <style content-container-css>
    	#content_container__ID{
    		position:fixed;
    		width:100%;
    		overflow:hidden;
    	}
    	#vm_loader{
    		display:none;
    		position:absolute;
    	}
    	.loader__ID {
    	  height: 4px;
    	  width: 100%;
    	  position: relative;
    	  overflow: hidden;
    	  background-color: #ddd;
    	}
    	.loader__ID:before{
    	  display: block;
    	  position: absolute;
    	  content: "";
    	  left: -200px;
    	  width: 200px;
    	  height: 4px;
    	  background-color: #2980b9;
    	  animation: loading 2s linear infinite;
    	}
    	@keyframes loading {
    		from {left: -200px; width: 30%;}
    		50% {width: 30%;}
    		70% {width: 70%;}
    		80% { left: 50%;}
    		95% {left: 120%;}
    		to {left: 100%;}
    	}
    </style>
    <div alert class="modal fade" id="vm_alert_information" tabindex="-1" role="dialog" aria-labelledby="vm_dialog" aria-hidden="true" data-backdrop="static">
    	<div class="modal-dialog" role="document">
    		<div class="modal-content">
    			<div class="modal-header">
    				<h5 class="modal-title" id="ModalLabel">Information</h5>
    				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
    					<span aria-hidden="true">&times;</span>
    				</button>
    			</div>
    			<div class="modal-body">

    			</div>
    			<div class="modal-footer">
    				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
    			</div>
    		</div>
    	</div>
    </div>
</div>
<div footer>
    <div footer id=footer__ID>
    	<span id=text__ID></span>
    	<span id=vm_system_info style='color:#555;float:right'></span>
    	<script>
            var vm_footer=function(){
        		$vm.root_layout_footer='footer__ID';
        		//-----------------------------------------------------
                $('#text__ID').html("Copyright © "+(new Date()).getFullYear()+", Your company name. <span id=FL__ID>Site Code on GitHub (github.com/vmiis). Pull Requests welcome!</span>");
        		//------------------------------------
            }
    	</script>
    	<style>
    		#footer__ID{
    			height:24px;
    			color: #fff;
    			padding: 3px;
        		background-color: #333;
    			font:80%/18px arial;
                text-align: center;
    		}
    		@media screen and (max-width: 900px){
    			#FL__ID{
    				display:none;
    			}
    		}
    	</style>
    </div>
</div>
<script layout-js>
	function vm_layout(){
		//------------------------------------
		var home_page_module='home';
        $vm.root_layout_content_slot="content_container__ID";
        console.log((new Date().getTime()-$vm.start_time).toString()+"---"+"********************* start running code in main.html ************************");
		//This is the place we can add background image to body (Asynchronous)
		var $image1 = $("<img>");
		$image1.on('load',(function(){ $('body').css("background", "url("+$(this).attr("src")+") no-repeat bottom center"); $('body').css("background-size", "cover");  }));
        $image1.attr("src", "layout/layout.html.jpg");
		console.log((new Date().getTime()-$vm.start_time).toString()+"---"+"********************* background image is ready ************************");
		//------------------------------------
		var website_item_list_for_search=[]
		//------------------------------------
		window.onmessage=function(e){
		    if(e.data.username!=undefined && e.data.user_id!=undefined){
		        $vm.user=e.data.username;
		        $vm.user_id=e.data.user_id;
		        $VmAPI.set_token(e.data.token,e.data.api_url,e.data.username,e.data.user_id,e.data.nickname);
		        location.reload(true);
		    }
		};
		//-----------------------------------------
        var set_height=function(){
			var header_height=$('#header__ID').outerHeight(); $vm.header_height=header_height;
			var footer_height=$('#footer__ID').outerHeight();
			$vm.min_height=($(window).height()-header_height-footer_height);
			$('#content_container__ID').css({'height':($vm.min_height)+'px'});
		}
		//------------------------------------
		set_height();window.onresize=function(){set_height();}
        //-----------------------------------------
		//over write vm alert
		$vm.alert=function(msg){
			$('#vm_alert_information div.modal-body').html( $('<div/>').html(msg).text() );
			$("#vm_alert_information").modal();
		}
        $vm.close_alert=function(){
            $('#vm_alert_information').modal('hide');
		}
		//------------------------------------
		//add all modules to module list
		//------------------------------------
		var Loaded=0;
		var add_config_modules_to_module_list_and_start=function(url,text,prefix){
			var config;
			try{ config=JSON.parse(text);}
			catch (e){ alert("Error in config file\n"+e); return; }
			var modules=config.modules;
			for (var property in modules) {
			   	if($vm.module_list[prefix+property]==undefined){
				   	$vm.module_list[prefix+property]=modules[property];
					if($vm.module_list[prefix+property].prefix!=undefined) $vm.module_list[prefix+property].prefix=prefix+$vm.module_list[prefix+property].prefix;
                    else $vm.module_list[prefix+property].prefix=prefix;
					var nm=$vm.module_list[prefix+property]['name_for_search'];
					if(nm!=""){
						if(nm==undefined) nm=property;
						website_item_list_for_search.push({label:nm,value:prefix+property})
					}
					var m_url=$vm.module_list[prefix+property].url;
					if(m_url!=undefined) m_url=$vm.url(m_url);
					$vm.module_list[prefix+property].url=url.split('|')[0]+"/"+m_url;
                    if(m_url!=undefined && (m_url.substring(0,7)=="http://" || m_url.substring(0,8)=="https://") ) $vm.module_list[prefix+property].url=m_url;
			   	}
			}
			if($vm.module_list[home_page_module]!=undefined){
				if(Loaded==0){
					Loaded=1;
					$('#vm_system_info').text((new Date().getTime()-$vm.start_time).toString()+"ms")
					var a=window.location.href.split('module=');
					if(a.length!=2){
						console.log((new Date().getTime()-$vm.start_time).toString()+"---"+"********************* loading home module... **************************")
						$vm.nav_load_module(home_page_module);
					}
				}
			}
		}
		//------------------------------------
		var process_config_file=function(url,prefix){
			$.get(url.replace('|','/')+'?_='+$vm.ver[0]+$vm.reload,function(data){
				localStorage.setItem(url+"_txt",data);
				localStorage.setItem(url+"_ver",$vm.ver[0]);
				add_config_modules_to_module_list_and_start(url,data,prefix);
			},'text').fail(function() {
				console.log("The configuration file ("+url.replace('|','/')+") doesn't exist!")
			});
		}
		//********************************************************
		//Load module json
		var panels=$vm.app_config.panels;
		var panelN=panels.length;
		var panel_names=[];
		for (var k in $vm.app_config.panels){
			panel_names.push(k);
		}
		var panelI=0,loop=0;
		var loading_loop=setInterval(function (){
			loop++;
			if(panelN==panel_names.length || loop==100){
				clearInterval(loading_loop);
				console.log((new Date().getTime()-$vm.start_time).toString()+"---"+"********************* module list is ready **************************")
				$vm.search_list=1;
				load_search_modules();
				load_system_modules();
				load_hot_modules();
				return;
			}
			var property=panel_names[panelI];
			if(property!=undefined){
				$vm.module_list[property]={"url":panels[property].url}
				var prefix=property+"_";
				if(panels[property].prefix==undefined) $vm.module_list[property].prefix=prefix;
				else $vm.module_list[property].prefix=panels[property].prefix+"_";
				var json_files=panels[property].modules;
				for(var i=0;i<json_files.length;i++){
					var url=$vm.url(json_files[i]);
					if(json_files[i].indexOf('https://')==-1){
						if(json_files[i].indexOf('|')==-1)   url=$vm.hosting_path+"|"+url;
						else                                 url=$vm.hosting_path+"/"+url;
					}
					var ver=localStorage.getItem(url+"_ver");
					var txt=localStorage.getItem(url+"_txt");
					if(ver!=$vm.ver[0] || txt===null || $vm.debug===true || $vm.reload!=''){
						process_config_file(url,prefix);
					}
					else{
						add_config_modules_to_module_list_and_start(url,txt,prefix);
					}
				}
			}
			panelI++;
		},1);
		//********************************************************
		//set header available
		var set_module_search=function(){
			$("#vm_system_search").autocomplete({
				minLength:0,
				source: function(request, response) {
					var results=$.ui.autocomplete.filter(website_item_list_for_search, request.term);
					response(results.slice(0, 10));
				},
				select: function(event,ui) {
					event.preventDefault();
					$('.navbar-collapse').collapse('hide');
					$("#vm_system_search").val('');
					$("#vm_system_search").blur();
					$('.ui-helper-hidden-accessible').html('');
					$vm.nav_load_module(ui.item.value);
				},
                position: {  collision: "flip"  }
			});
			$("#vm_system_search").focus(function(){$("#vm_system_search").autocomplete("search","");});
		}
		//------------------------------------
        var search_loop=setInterval(function (){
            console.log('search_loop'+"-"+$vm['jquery-ui-min-js']+"-"+$vm.search_list+"-"+$vm['popper-min-js']);
			if($vm['jquery-ui-min-js']==1 && $vm.search_list==1 /*&& $vm['popper-min-js']==1*/){
				clearInterval(search_loop);
				set_module_search();
				//$('#vm_system_menu').show();
				console.log((new Date().getTime()-$vm.start_time).toString()+"---"+"********************* menu bar is ready ************************");
			}
		},100);
		//------------------------------------
		var load_search_modules=function(){
			var a=window.location.href.split('module=');
			if(a.length==2){
				var name=a[1].split('&')[0];
				if(name.length>0){
					if($vm.module_list[name]!=undefined){
						$vm.nav_load_module(name);
						return;
					}
                    else alert("The module "+name+" is not in the module list!");
				}
				else alert("The module "+name+" is not correct!");
			}
		}
		//------------------------------------
		var load_system_modules=function(){
			//-------------------------------------
	        $vm.module_list['_system_export_dialog_module']={table_id:'',url:'__COMPONENT__/dialog/export_dialog_module.html'};
	        $vm.nav_load_module('_system_export_dialog_module','hidden',{})
	        //-------------------------------------
	        $vm.module_list['_system_import_dialog_module']={table_id:'',url:'__COMPONENT__/dialog/import_dialog_module.html'};
	        $vm.nav_load_module('_system_import_dialog_module','hidden',{})
			//-------------------------------------
			$vm.module_list['uploading_file_dialog_module']={table_id:'',url:'__COMPONENT__/dialog/uploading_file_dialog_module.html'};
	        $vm.nav_load_module('uploading_file_dialog_module','hidden',{})
			//-------------------------------------
		}
		var load_hot_modules=function(){
			//pre load into memory, for fast showing on screen
			//-------------------------------------
	        //$vm.nav_load_module('page-examples_snapshot-about','hidden',{})
	        //-------------------------------------
		}
		//------------------------------------
	}
</script>
<style layout-css>
    .vm_module{
        /*position:absolute;*/
        width:100%;
        height:100%;
    }
	html,body{
		/*height:100%;*/
		/*overflow-y:hidden;*/
        width: 100%;
        height: 100%;
        padding:0;
        margin:0;
        font-family:Arial;
	}
	@keyframes vm_module_fadein {
		from { opacity:0; }
		to {opacity:1;}
	}
    @keyframes vm_module_slide_in {
		from { margin-top:50%; }
		to {margin-top:0;}
	}
    @keyframes vm_module_slide_out {
        from { margin-top:0; }
		to {margin-top:-50%;}
	}
    .ui-widget-content{
        background:#eff3dc!important;
    }
    .ui-autocomplete.ui-menu{font-size:12px}
	.ui-menu-item .ui-menu-item-wrapper:hover{
		font-weight:normal;
	}
    #layout__ID {
        height: 100%;
        display: grid;
        grid-template-rows: auto 1fr auto;
        overflow:hidden;
    }
    @media print {
        html,body{
            width:100%;
            height:100%;
            overflow:visible;
        }
        body * {
            visibility: hidden;
        }
        #content_container_0, #content_container_0 *{
            visibility: visible;
        }
    }
</style>
<script init>
    function vm_init(callback){
        //--------------------------------------------------------
        //--------------------------------------------------------
		$vm.start_time=new Date().getTime();
		//check and clear localstorage
		var data=''; for(var key in window.localStorage){ if(window.localStorage.hasOwnProperty(key)){ data+=window.localStorage[key]; }}
		if(data.length>3000000) localStorage.clear();
		if(window.location.href.indexOf('?clearcache=1')!=-1){
			localStorage.clear();
			alert("Cache is cleard!");
			return;
		}
		//set name space
		$VmAPI={};$vm.module_list={};$vm.config_list={}
		//--------------------------------------------------------
		//get hosting path
		var href = window.location.href.split('?')[0];
		var path=href.split('/index.html')[0];
		var lastChar=path[path.length-1];
		if(lastChar=='/') path=path.substring(0,path.length-1);
		$vm.hosting_path=path;
		//if(window.location.hostname=='127.0.0.1' || window.location.hostname=='localhost')	$vm.debug =true;
		//--------------------------------------------------------
		$vm.reload='';
		if(window.location.toString().indexOf('_d=3')!=-1){
			$vm.reload=new Date().getTime().toString();
		}
		$vm.version=$vm.ver[0];
		//--------------------------------------------------------
        $vm.parts_path="https://vmiis.github.io/component";
		if(window.location.hostname=='127.0.0.1' || window.location.hostname=='localhost'){
			$vm.library_path =window.location.protocol+'//'+window.location.host;
		}
		//--------------------------------------------------------
		if($vm.app_config.default_production=='No'){
			if(window.location.toString().indexOf('database=production')!=-1){
				$vm.server          ='production';
				$VmAPI.api_base     =$vm.app_config.api_path_production;
			}
			else if(window.location.toString().indexOf('database=woolcock')!=-1){
				$vm.server          ='production';
				$VmAPI.api_base     =$vm.app_config.api_path_woolcock;
			}
			else{
				$vm.server          ='development';
				$VmAPI.api_base     =$vm.app_config.api_path_development;
			}
		}
		else {
			if(window.location.toString().indexOf('database=development')!=-1){
				$vm.server          ='development';
				$VmAPI.api_base     =$vm.app_config.api_path_development;
			}
			else{
				$vm.server          ='production';
				$VmAPI.api_base     =$vm.app_config.api_path_production;
			}
		}
		$vm.debug_message=true; //show debug message in console
		//--------------------------------------------------------
        //load vm framework, vm api and first module
        var load_vmapi   =function(){ load_js($vm.url('https://vmiis.github.io/api/distribution/vmapi.min.js'),load_vm);	}
        var load_vm      =function(){ load_js($vm.url('https://vmiis.github.io/framework/distribution/vmframework.min.js'),init);}
        var init         =function(){
             $vm.init_v3({callback:function(){
                $vm.init_status=1;
                //$vm.root_layout_content_slot='content_container_0';
                var content=$('body').find('#D__ID').html();
                $('body').find('#D__ID').remove();
                $('body').prepend("<div id='content_container_0'></div>");
                over_write_alert();
                setTimeout(function (){	$.ajaxSetup({cache:true}); load_resources(resources); },10);
                callback();
            }})
        }
        //--------------------------------------------------------
        var load_js=function(url,next){
            //this is js loader
            var ver=localStorage.getItem(url+"_ver");
            var txt=localStorage.getItem(url+"_txt");
            //------------------------------------------
            if(ver!=$vm.ver[1] || txt===null){
                console.log((new Date().getTime()-$vm.start_time).toString()+"---"+'loading '+url+'?_='+$vm.ver[1]);
                $.get(url+'?_='+$vm.reload,function(data){
                    localStorage.setItem(url+"_txt",data);
                    localStorage.setItem(url+"_ver",$vm.ver[1]);
                    $('head').append('<scr'+'ipt>'+data+'</scr'+'ipt>');
                    next();
                },'text');
            }
            else{ $('head').append('<scr'+'ipt>'+txt+'</scr'+'ipt>'); next(); }
            //------------------------------------------
        }
        //--------------------------------------------------------
        $vm.url=function(text){
            text=text.replace(/__HOST__\//g,$vm.hosting_path+'/');
            text=text.replace(/__PARTS__\//g,'https://vmiis.github.io/component/');
            text=text.replace(/__COMPONENT__\//g,'https://vmiis.github.io/component/');
            return text;
        }
        //------------------------------------
        var resources=[
          //"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css",
          "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",
          "https://ajax.aspnetcdn.com/ajax/jquery.ui/1.12.1/themes/redmond/jquery-ui.css",

          "https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js",
          "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js",
          "https://ajax.aspnetcdn.com/ajax/jquery.ui/1.12.1/jquery-ui.min.js",
          "https://apis.google.com/js/plusone.js",
          "https://ajax.aspnetcdn.com/ajax/jquery.validate/1.14.0/jquery.validate.min.js",
          "https://sdk.amazonaws.com/js/aws-sdk-2.1.34.min.js",
          "https://www.gstatic.com/charts/loader.js"
        ];
        //------------------------------------
        var load_resources=function(links){
          for(i in links){
            var e=links[i].split('.').pop();
            if(e=='css'){
              $('head').append("<link rel='stylesheet' href='"+links[i]+"'>");
            }
            else if(e=='js'){
              load_js_link(links[i])
            }
          }
          var load_system_modules=function(){
              //-------------------------------------
              $vm.module_list['_system_export_dialog_module']={table_id:'',url:'__COMPONENT__/dialog/export_dialog_module.html'};
              $vm.load_module_v2('_system_export_dialog_module','hidden',{})
              //-------------------------------------
              $vm.module_list['_system_import_dialog_module']={table_id:'',url:'__COMPONENT__/dialog/import_dialog_module.html'};
              $vm.load_module_v2('_system_import_dialog_module','hidden',{})
              //-------------------------------------
              $vm.module_list['uploading_file_dialog_module']={table_id:'',url:'__COMPONENT__/dialog/uploading_file_dialog_module.html'};
              $vm.load_module_v2('uploading_file_dialog_module','hidden',{})
              //-------------------------------------
          }
          load_system_modules();
        }
        //------------------------------------
        var load_js_link=function(link){
          $.getScript(link,function(){
            var nm=link.split('/').pop();
            nm=nm.replace(/\./g,'-');
            $vm[nm]=1;
            if(nm=='loader-js'){
              google.charts.load('current', {packages: ['corechart']});
            }
          });
        }
        //------------------------------------
        var over_write_alert=function(){
          //over write vm alert
          $vm.alert=function(msg){
            $('#vm_alert_information div.modal-body').html( $('<div/>').html(msg).text() );
            $("#vm_alert_information").modal();
          }
          $vm.close_alert=function(){
            $('#vm_alert_information').modal('hide');
          }
          //------------------------------------
        }
        load_vmapi();
    }
    $vm.app_config={
    	"api_path_development":"https://cbs.wappsystem.com/dev/",
    	"api_path_production":"https://cbs.wappsystem.com/dev/",
    	"default_production":"No",
    	"panels":{
    		"home":	        {"url":"panels/home.html","modules":[]},
    		"pages":	    {"url":"","modules":["pages|index.json"]}
    	}
    }
    vm_init(function(){
        vm_layout();
        vm_top_right_corner();
        vm_header();
        vm_footer();
    })
</script>
