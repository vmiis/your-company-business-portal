VmInclude:__COMPONENT__/toolbar/form-toolbar.html
<section id=form_container__ID>
	<div id=header__ID>
		File
	</div>
	<form id=F__ID>
		<div class="container">
            <div class="row row__ID" id=row_topic__ID>
				<div class="col-sm-12 col-lg-9 input__ID">
					<span class=label__ID>Topic</span><br>
					<input name="Topic" class=form-control id=Topic__ID data-id="Topic">
				</div>
				<div class="col-sm-12 col-lg-3 input__ID">
					<span class=label__ID>Topic ID</span><br>
					<input name="Topic_uid" class=form-control readonly>
				</div>
				<br>
				<hr style='border-top:1px solid #666; width:100%'></hr>
			</div>
            <div class="row row__ID">
                <div class="col">
                    <span>Short Title</span>
                    <input type=text class="form-control" name="Short_Title">
                </div>
            </div>
            <div class="row row__ID">
                <div class="col">
                    <span>Contents</span>
                    <textarea class="form-control" name="Contents" style='min-height:60px'></textarea>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col">
                    <span>Color</span>
                    <input type=color style="border:none;" name="Color" value="#008000">
                </div>
            </div>
            <br>
			<div class="row">
				<div class=col>
					<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
				</div>
			</div>
		</div>
	</form>
</section>
<script>
    function F__ID(){
        //-------------------------------------
        VmInclude:__CURRENT_PATH__/task_form.js
        //-------------------------------------
        var topic_tid=this_module.topic_tid;
    	var sql="with tb as (select name=S1,value2=uid from [TABLE-"+topic_tid+"])";
    	sql+=" select top 10 name,value=name,value2 from tb where name like '%'+@S1+'%' ";
    	$vm.autocomplete($('#Topic__ID'),sql,function(key,value){
    		$("#F__ID input[name="+key+"]").val($vm.text(value));
    	})
        //-------------------------------------
        var on_load=function(record){
            $('#F__ID input[name=Topic').prop("disabled",false);
            if(record!=undefined){
                if(record.Topic!=undefined){
                    if(record.PUID!=undefined) $('#F__ID input[name=Topic_uid').val(record.PUID);
                    $('#F__ID input[name=Topic').prop("disabled",true);
                }
            }
        }
        //-------------------------------------
        var before_submit=function(record,dbv){
            if(record.Topic_uid==""){
                $vm.alert("No topic was selected.");
                return false;
            }
    		dbv.PUID=record.Topic_uid;
            dbv.S1=record.Short_Title;
            return true;
        };
        //-------------------------------------
    }
</script>
<style>
    .file_button__ID{
        cursor: pointer;
        padding-left: 10px;
        float: right;
        line-height: 10px;
        margin-top:4px;
        margin-right:3px;
        color: #666;
    }
	#D__ID{
		height:100%;
		overflow:auto;
		animation: vm_module_fadein 1.0s;
        background-color: #fff;
	}
    #form_container__ID{
        margin-top:20px;
		max-width: 600px;
		margin-left: auto;
		margin-right: auto;
		font-family: Verdana,sans-serif;
    	font-size: 15px;
    	line-height: 1.5;
	}
    #F__ID{
		border:1px solid #bbb;
        border-top-width: 0;
		padding:6px 15px 20px 15px;
	}
	#header__ID{
		background-color:#727b84;
		color:#fff;
		padding:10px 15px 10px 15px;
		font-size:120%;
        border:1px solid #bbb;
        border-bottom-width: 0;
	}
    .row__ID{
		padding:6px 0;
	}
	.row__ID:hover{
		background-color: rgba(0,0,0,0.1);
	}
	.row__ID span{
        font-weight:bold;
    	display: inline-block;
    	padding: 5px 0;
	}
	@media screen and (max-width:768px){
		#form_container__ID{
			padding:20px 10px 50px 10px;
		}
	}
    @media print{
        #form_container__ID{
            margin:0;
            padding:0;
            position: absolute;
            top:0;
            left:0;
            width:100%;
            max-width: 100%;
        }
    }
</style>
