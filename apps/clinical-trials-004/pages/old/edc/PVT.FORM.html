<section>
    VmInclude:__COMPONENT__/toolbar/back_save_print.html
	<form id=F__ID style='padding:30px'>
        <table id=table_form__ID style='width:600px;'>
            <colgroup><col class=colA /><col style='width:100px' /></colgroup>
            <tr><td colspan=2 class='header__ID'>PVT</td></tr>
            <tr ><td colspan=2>
                <input name=Participant__ID  id=Participant__ID  type=text class=sel__ID  placeholder="Select a Participant"/>
                <input name=Participant_uid__ID id=Participant_uid__ID type=text readonly style="width:50px;color:#ccc;" />
                <u style='cursor:pointer;float:right;' id=Participant_r__ID>Remove</u>
            </td></tr>
            <tr><td class=''>Upload PVT File</td><td><input id=PVT_File_Name__ID type='file'></td></tr>
            <tr><td>Subject ID</td><td><input name=PVT_Subject_ID__ID id=PVT_Subject_ID__ID type=text /></td></tr>
            <tr><td>Trial No.</td><td><input name=PVT_Trial_No__ID id=PVT_Trial_No__ID type=text /></td></tr>
            <tr><td>Trial Date_Time</td><td><input name=PVT_Trial_Date_Time__ID id=PVT_Trial_Date_Time__ID type=text /></td></tr>
            <tr><td>Study</td><td><input name=PVT_Study__ID id=PVT_Study__ID type=text /></td></tr>
            <tr><td>Subj. Initials</td><td><input name=PVT_Subj_Initials__ID id=PVT_Subj_Initials__ID type=text /></td></tr>
            <tr><td>Exp. Initials</td><td><input name=PVT_Exp_Initials__ID id=PVT_Exp_Initials__ID type=text /></td></tr>
            <tr><td>ISI Minimum</td><td><input name=PVT_ISIMin__ID id=PVT_ISIMin__ID type=text /></td></tr>
            <tr><td>ISI Maximum</td><td><input name=PVT_ISIMax__ID id=PVT_ISIMax__ID type=text /></td></tr>
            <tr><td>Hand</td><td><input name=PVT_HandUsed__ID id=PVT_HandUsed__ID type=text /></td></tr>
            <tr><td>Trial Length</td><td><input name=PVT_TotalLength__ID id=PVT_TotalLength__ID type=text /></td></tr>
            <tr><td>Sleepy Pre</td><td><input name=PVT_PreVAS__ID id=PVT_PreVAS__ID type=text /></td></tr>
            <tr><td>Sleepy Post</td><td><input name=PVT_PostVAS__ID id=PVT_PostVAS__ID type=text /></td></tr>
            <tr><td>Good R's</td><td><input name=PVT_GoodRs__ID id=PVT_GoodRs__ID type=text /></td></tr>
            <tr><td>Mean RT</td><td><input name=PVT_MeanRT__ID id=PVT_MeanRT__ID type=text /></td></tr>
            <tr><td>SD RT</td><td><input name=PVT_SDRT__ID id=PVT_SDRT__ID type=text /></td></tr>
            <tr><td>Median RT</td><td><input name=PVT_MedianRT__ID id=PVT_MedianRT__ID type=text /></td></tr>
            <tr><td>Minimum RT</td><td><input name=PVT_MinRT__ID id=PVT_MinRT__ID type=text /></td></tr>
            <tr><td>Maximum RT</td><td><input name=PVT_MaxRT__ID id=PVT_MaxRT__ID type=text /></td></tr>
            <tr><td>Mean RRT</td><td><input name=PVT_MeanRRT__ID id=PVT_MeanRRT__ID type=text /></td></tr>
            <tr><td>SD RRT</td><td><input name=PVT_SDRRT__ID id=PVT_SDRRT__ID type=text /></td></tr>
            <tr><td>Lapses (RT &gt; 500ms)</td><td><input name=PVT_Lapses__ID id=PVT_Lapses__ID type=text /></td></tr>
            <tr><td>Lap (SQR XFRM)</td><td><input name=PVT_Lap__ID id=PVT_Lap__ID type=text /></td></tr>
            <tr><td>Total Errors</td><td><input name=PVT_TotalErrors__ID id=PVT_TotalErrors__ID type=text /></td></tr>
            <tr><td>RT &lt; 100ms</td><td><input name=PVT_RTLess100__ID id=PVT_RTLess100__ID type=text /></td></tr>
            <tr><td>Wrong Key R's</td><td><input name=PVT_WrongKey__ID id=PVT_WrongKey__ID type=text /></td></tr>
            <tr><td>False Starts (c)</td><td><input name=PVT_FalseStartsCorrKey__ID id=PVT_FalseStartsCorrKey__ID type=text /></td></tr>
            <tr><td>False Starts (e)</td><td><input name=PVT_FalseStartsInCorrKey__ID id=PVT_FalseStartsInCorrKey__ID type=text /></td></tr>
            <tr><td>Key Held &gt; 3 s</td><td><input name=PVT_KeyHeld__ID id=PVT_KeyHeld__ID type=text /></td></tr>
            <tr><td>No R for 30s</td><td><input name=PVT_NoR30sec__ID id=PVT_NoR30sec__ID type=text /></td></tr>
            <tr><td>Distrib. Asym.</td><td><input name=PVT_DistribAsym__ID id=PVT_DistribAsym__ID type=text /></td></tr>
            <tr><td>Mean F RT</td><td><input name=PVT_MeanFRT__ID id=PVT_MeanFRT__ID type=text /></td></tr>
            <tr><td>SD F RT</td><td><input name=PVT_SDFRT__ID id=PVT_SDFRT__ID type=text /></td></tr>
            <tr><td>Mean F RRT</td><td><input name=PVT_MeanFRRT__ID id=PVT_MeanFRRT__ID type=text /></td></tr>
            <tr><td>SD F RRT</td><td><input name=PVT_MeanSDFRRT__ID id=PVT_MeanSDFRRT__ID type=text /></td></tr>
            <tr><td>Mean S RT</td><td><input name=PVT_MeanSRT__ID id=PVT_MeanSRT__ID type=text /></td></tr>
            <tr><td>SD S RT</td><td><input name=PVT_SDSRT__ID id=PVT_SDSRT__ID type=text /></td></tr>
            <tr><td>Mean S RRT</td><td><input name=PVT_MeanSRRT__ID id=PVT_MeanSRRT__ID type=text /></td></tr>
            <tr><td>SD S RRT</td><td><input name=PVT_SDSRRT__ID id=PVT_SDSRRT__ID type=text /></td></tr>
            <tr><td>RRT Slope</td><td><input name=PVT_RRTSlope__ID id=PVT_RRTSlope__ID type=text /></td></tr>
            <tr><td>RRT Intcpt</td><td><input name=PVT_RRTIntcpt__ID id=PVT_RRTIntcpt__ID type=text /></td></tr>
            <tr><td>RRT R2</td><td><input name=PVT_RRTR2__ID id=PVT_RRTR2__ID type=text /></td></tr>
            <tr><td>Ci of Slope</td><td><input name=PVT_CiSlope__ID id=PVT_CiSlope__ID type=text /></td></tr>
            <tr><td>Std Err of Line</td><td><input name=PVT_STdErrOfLine__ID id=PVT_STdErrOfLine__ID type=text /></td></tr>
            <tr><td>t vs Zero Slope</td><td><input name=PVT_tVsZeroSlope__ID id=PVT_tVsZeroSlope__ID type=text /></td></tr>
            <tr><td>% Change</td><td><input name=PVT_PercentChange__ID id=PVT_PercentChange__ID type=text /></td></tr>
         </table>
    </form>
</section>
<script>
    function F__ID(){
        //-------------------------------------
        VmInclude:__COMPONENT__/grid/grid.v3.js
        
        VmInclude:__CURRENT_PATH__/task.js
        //-------------------------------------
        $('#D__ID').on('load',function(){
            //-------
            //jQuery validation
            //$('#NBACK__ID').rules('add', 'required');
            //-------
            $('#F__ID')[0].reset();
             _set_req(); _request_data();
        });

        document.getElementById('PVT_File_Name__ID').addEventListener('change', handleFileSelect,false);
        //-----------------------------------------------------------------
        function handleFileSelect(evt) {
            var files = evt.target.files;
            if(files.length>0){
              var reader = new FileReader();
              reader.onload = (function(e) {
                var contents = e.target.result;
                var lines=contents.replace(/"/g,'').replace(/\r/,'\n').replace(/\n\n/,'\n').replace(/\t/g,',').split('\n');
                if(lines.length>=2){
                    var header=lines[0].split(',');
                    var row=lines[1].split(',');
                    for(i=0;i<header.length;i++){
                        switch(header[i]) {
                            case 'Subject ID': $('#PVT_Subject_ID__ID').val(row[i]);break;
                            case 'Trial No.': $('#PVT_Trial_No__ID').val(row[i]); break;
                            case 'Trial Date_Time': $('#PVT_Trial_Date_Time__ID').val(row[i]); break;
                            case 'Study': $('#PVT_Study__ID').val(row[i]); break;
                            case 'Subj. Initials': $('#PVT_Subj_Initials__ID').val(row[i]); break;
                            case 'Exp. Initials': $('#PVT_Exp_Initials__ID').val(row[i]); break;
                            case 'ISI Minimum': $('#PVT_ISIMin__ID').val(row[i]); break;
                            case 'ISI Maximum': $('#PVT_ISIMax__ID').val(row[i]); break;
                            case 'Hand': $('#PVT_HandUsed__ID').val(row[i]); break;
                            case 'Trial Length': $('#PVT_TotalLength__ID').val(row[i]); break;
                            case 'Sleepy Pre': $('#PVT_PreVAS__ID').val(row[i]); break;
                            case 'Sleepy Post': $('#PVT_PostVAS__ID').val(row[i]); break;
                            case "Good R's": $('#PVT_GoodRs__ID').val(row[i]); break;
                            case 'Mean RT': $('#PVT_MeanRT__ID').val(row[i]); break;
                            case 'SD RT': $('#PVT_SDRT__ID').val(row[i]); break;
                            case 'Median RT': $('#PVT_MedianRT__ID').val(row[i]); break;
                            case 'Minimum RT': $('#PVT_MinRT__ID').val(row[i]); break;
                            case 'Maximum RT': $('#PVT_MaxRT__ID').val(row[i]); break;
                            case 'Mean RRT': $('#PVT_MeanRRT__ID').val(row[i]); break;
                            case 'SD RRT': $('#PVT_SDRRT__ID').val(row[i]); break;
                            case 'Lapses (RT > 500ms)': $('#PVT_Lapses__ID').val(row[i]); break;
                            case 'Lap (SQR XFRM)': $('#PVT_Lap__ID').val(row[i]); break;
                            case 'Total Errors': $('#PVT_TotalErrors__ID').val(row[i]); break;
                            case 'RT < 100 ms': $('#PVT_RTLess100__ID').val(row[i]); break;
                            case "Wrong key R's": $('#PVT_WrongKey__ID').val(row[i]); break;
                            case 'False Starts (c)': $('#PVT_FalseStartsCorrKey__ID').val(row[i]); break;
                            case 'False Starts (e)': $('#PVT_FalseStartsInCorrKey__ID').val(row[i]); break;
                            case 'Key Held > 3 s': $('#PVT_KeyHeld__ID').val(row[i]); break;
                            case 'No R for 30s': $('#PVT_NoR30sec__ID').val(row[i]); break;
                            case 'Distrib. Asym.': $('#PVT_DistribAsym__ID').val(row[i]); break;
                            case 'Mean F RT': $('#PVT_MeanFRT__ID').val(row[i]); break;
                            case 'SD F RT': $('#PVT_SDFRT__ID').val(row[i]); break;
                            case 'Mean F RRT': $('#PVT_MeanFRRT__ID').val(row[i]); break;
                            case 'SD F RRT': $('#PVT_MeanSDFRRT__ID').val(row[i]); break;
                            case 'Mean S RT': $('#PVT_MeanSRT__ID').val(row[i]); break;
                            case 'SD S RT': $('#PVT_SDSRT__ID').val(row[i]); break;
                            case 'Mean S RRT': $('#PVT_MeanSRRT__ID').val(row[i]); break;
                            case 'SD S RRT': $('#PVT_SDSRRT__ID').val(row[i]); break;
                            case 'RRT Slope': $('#PVT_RRTSlope__ID').val(row[i]); break;
                            case 'RRT Intcpt': $('#PVT_RRTIntcpt__ID').val(row[i]); break;
                            case 'RRT R2': $('#PVT_RRTR2__ID').val(row[i]); break;
                            case 'Ci of Slope': $('#PVT_CiSlope__ID').val(row[i]); break;
                            case 'Std Err of Line': $('#PVT_STdErrOfLine__ID').val(row[i]); break;
                            case 't vs Zero Slope': $('#PVT_tVsZeroSlope__ID').val(row[i]); break;
                            case '% Change': $('#PVT_PercentChange__ID').val(row[i]); break;
                        }
                    }
                }
            });
            reader.readAsText(files[0]);
            }
        }
        //-------------------------------------
        //Overwrite these 2 functions if you have special needs
/*        _db_to_form=function(record){
            for(name in record){
                if(name!=="" && name!==undefined){
                    $('input[name="' + name+ '__ID"][value="' + record[name] + '"]').prop('checked', true);
                }
            }
        }
        //-------------------------------------
        _form_to_db=function(){
            var record={}
            //alert($('input[name=KSS__ID]:checked').val())
            if( $('input[name=KSS__ID]:checked').val()===undefined){
                $('#D__ID').data("validation","not_ok"); alert("Please answer question 1");
                return false;
            }
            record['KSS']=$('input[name="KSS__ID"]:checked').val();
            return record;
        }
*/
    }
</script>
<style>
VmInclude:__COMPONENT__/toolbar/toolbar.css
VmInclude:__COMPONENT__/style/form.css
.rb__ID{
    font-size: 14px;
    padding-left: 5px;
    vertical-align:top!important;
}
.modified_radio__ID {
    -webkit-appearance: none;
    -moz-appearance: button;
/*	background-color: #fafafa;*/
    border: 1px solid #000;
    width:14px;
    height:18px;
/*	box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05);*/
    padding: 3px;
    border-radius: 3px;
    display: inline-block;
    position: relative;
    opacity:0.15;
}
.modified_radio__ID:active, .modified_radio__ID:checked:active {
    /*box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px 1px 3px rgba(0,0,0,0.1);*/
}

.modified_radio__ID:checked {
    -moz-appearance: button;
    background-color: #888;
    border: 1px solid #adb8c0;
/*	box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px -15px 10px -12px rgba(0,0,0,0.05), inset 15px 10px -12px rgba(255,255,255,0.1);*/
    color: #99a1a7;
    opacity:0.9;
}
.modified_radio__ID:checked:after {
    /*content: '\2714';*/
    font-size: 14px;
    position: absolute;
    top: 0px;
    left: 3px;
    color: #99a1a7;
}
.modified_number__ID{
    margin-left:-19px;
    font-size:14pt;
}

.modified_radio__ID:active, .modified_radio__ID:checked:active {
    box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0px 1px 3px rgba(0,0,0,0.1);
}
.modified_number__ID{
    margin-left:-19px;
    font-size:14pt;
}

</style>
